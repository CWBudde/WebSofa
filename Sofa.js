/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */(function() {'use strict';var l=void 0,aa=this;function r(c,d){var a=c.split("."),b=aa;!(a[0]in b)&&b.execScript&&b.execScript("var "+a[0]);for(var e;a.length&&(e=a.shift());)!a.length&&d!==l?b[e]=d:b=b[e]?b[e]:b[e]={}};var t="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Uint32Array&&"undefined"!==typeof DataView;function v(c){var d=c.length,a=0,b=Number.POSITIVE_INFINITY,e,f,g,h,k,m,n,p,s,x;for(p=0;p<d;++p)c[p]>a&&(a=c[p]),c[p]<b&&(b=c[p]);e=1<<a;f=new (t?Uint32Array:Array)(e);g=1;h=0;for(k=2;g<=a;){for(p=0;p<d;++p)if(c[p]===g){m=0;n=h;for(s=0;s<g;++s)m=m<<1|n&1,n>>=1;x=g<<16|p;for(s=m;s<e;s+=k)f[s]=x;++h}++g;h<<=1;k<<=1}return[f,a,b]};function w(c,d){this.g=[];this.h=32768;this.d=this.f=this.a=this.l=0;this.input=t?new Uint8Array(c):c;this.m=!1;this.i=y;this.r=!1;if(d||!(d={}))d.index&&(this.a=d.index),d.bufferSize&&(this.h=d.bufferSize),d.bufferType&&(this.i=d.bufferType),d.resize&&(this.r=d.resize);switch(this.i){case A:this.b=32768;this.c=new (t?Uint8Array:Array)(32768+this.h+258);break;case y:this.b=0;this.c=new (t?Uint8Array:Array)(this.h);this.e=this.z;this.n=this.v;this.j=this.w;break;default:throw Error("invalid inflate mode");
}}var A=0,y=1,B={t:A,s:y};
w.prototype.k=function(){for(;!this.m;){var c=C(this,3);c&1&&(this.m=!0);c>>>=1;switch(c){case 0:var d=this.input,a=this.a,b=this.c,e=this.b,f=d.length,g=l,h=l,k=b.length,m=l;this.d=this.f=0;if(a+1>=f)throw Error("invalid uncompressed block header: LEN");g=d[a++]|d[a++]<<8;if(a+1>=f)throw Error("invalid uncompressed block header: NLEN");h=d[a++]|d[a++]<<8;if(g===~h)throw Error("invalid uncompressed block header: length verify");if(a+g>d.length)throw Error("input buffer is broken");switch(this.i){case A:for(;e+
g>b.length;){m=k-e;g-=m;if(t)b.set(d.subarray(a,a+m),e),e+=m,a+=m;else for(;m--;)b[e++]=d[a++];this.b=e;b=this.e();e=this.b}break;case y:for(;e+g>b.length;)b=this.e({p:2});break;default:throw Error("invalid inflate mode");}if(t)b.set(d.subarray(a,a+g),e),e+=g,a+=g;else for(;g--;)b[e++]=d[a++];this.a=a;this.b=e;this.c=b;break;case 1:this.j(ba,ca);break;case 2:for(var n=C(this,5)+257,p=C(this,5)+1,s=C(this,4)+4,x=new (t?Uint8Array:Array)(D.length),S=l,T=l,U=l,u=l,M=l,F=l,z=l,q=l,V=l,q=0;q<s;++q)x[D[q]]=
C(this,3);if(!t){q=s;for(s=x.length;q<s;++q)x[D[q]]=0}S=v(x);u=new (t?Uint8Array:Array)(n+p);q=0;for(V=n+p;q<V;)switch(M=E(this,S),M){case 16:for(z=3+C(this,2);z--;)u[q++]=F;break;case 17:for(z=3+C(this,3);z--;)u[q++]=0;F=0;break;case 18:for(z=11+C(this,7);z--;)u[q++]=0;F=0;break;default:F=u[q++]=M}T=t?v(u.subarray(0,n)):v(u.slice(0,n));U=t?v(u.subarray(n)):v(u.slice(n));this.j(T,U);break;default:throw Error("unknown BTYPE: "+c);}}return this.n()};
var G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],D=t?new Uint16Array(G):G,H=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],I=t?new Uint16Array(H):H,J=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],K=t?new Uint8Array(J):J,L=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],da=t?new Uint16Array(L):L,ea=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,
13,13],N=t?new Uint8Array(ea):ea,O=new (t?Uint8Array:Array)(288),P,fa;P=0;for(fa=O.length;P<fa;++P)O[P]=143>=P?8:255>=P?9:279>=P?7:8;var ba=v(O),Q=new (t?Uint8Array:Array)(30),R,ga;R=0;for(ga=Q.length;R<ga;++R)Q[R]=5;var ca=v(Q);function C(c,d){for(var a=c.f,b=c.d,e=c.input,f=c.a,g=e.length,h;b<d;){if(f>=g)throw Error("input buffer is broken");a|=e[f++]<<b;b+=8}h=a&(1<<d)-1;c.f=a>>>d;c.d=b-d;c.a=f;return h}
function E(c,d){for(var a=c.f,b=c.d,e=c.input,f=c.a,g=e.length,h=d[0],k=d[1],m,n;b<k&&!(f>=g);)a|=e[f++]<<b,b+=8;m=h[a&(1<<k)-1];n=m>>>16;if(n>b)throw Error("invalid code length: "+n);c.f=a>>n;c.d=b-n;c.a=f;return m&65535}
w.prototype.j=function(c,d){var a=this.c,b=this.b;this.o=c;for(var e=a.length-258,f,g,h,k;256!==(f=E(this,c));)if(256>f)b>=e&&(this.b=b,a=this.e(),b=this.b),a[b++]=f;else{g=f-257;k=I[g];0<K[g]&&(k+=C(this,K[g]));f=E(this,d);h=da[f];0<N[f]&&(h+=C(this,N[f]));b>=e&&(this.b=b,a=this.e(),b=this.b);for(;k--;)a[b]=a[b++-h]}for(;8<=this.d;)this.d-=8,this.a--;this.b=b};
w.prototype.w=function(c,d){var a=this.c,b=this.b;this.o=c;for(var e=a.length,f,g,h,k;256!==(f=E(this,c));)if(256>f)b>=e&&(a=this.e(),e=a.length),a[b++]=f;else{g=f-257;k=I[g];0<K[g]&&(k+=C(this,K[g]));f=E(this,d);h=da[f];0<N[f]&&(h+=C(this,N[f]));b+k>e&&(a=this.e(),e=a.length);for(;k--;)a[b]=a[b++-h]}for(;8<=this.d;)this.d-=8,this.a--;this.b=b};
w.prototype.e=function(){var c=new (t?Uint8Array:Array)(this.b-32768),d=this.b-32768,a,b,e=this.c;if(t)c.set(e.subarray(32768,c.length));else{a=0;for(b=c.length;a<b;++a)c[a]=e[a+32768]}this.g.push(c);this.l+=c.length;if(t)e.set(e.subarray(d,d+32768));else for(a=0;32768>a;++a)e[a]=e[d+a];this.b=32768;return e};
w.prototype.z=function(c){var d,a=this.input.length/this.a+1|0,b,e,f,g=this.input,h=this.c;c&&("number"===typeof c.p&&(a=c.p),"number"===typeof c.u&&(a+=c.u));2>a?(b=(g.length-this.a)/this.o[2],f=258*(b/2)|0,e=f<h.length?h.length+f:h.length<<1):e=h.length*a;t?(d=new Uint8Array(e),d.set(h)):d=h;return this.c=d};
w.prototype.n=function(){var c=0,d=this.c,a=this.g,b,e=new (t?Uint8Array:Array)(this.l+(this.b-32768)),f,g,h,k;if(0===a.length)return t?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);f=0;for(g=a.length;f<g;++f){b=a[f];h=0;for(k=b.length;h<k;++h)e[c++]=b[h]}f=32768;for(g=this.b;f<g;++f)e[c++]=d[f];this.g=[];return this.buffer=e};
w.prototype.v=function(){var c,d=this.b;t?this.r?(c=new Uint8Array(d),c.set(this.c.subarray(0,d))):c=this.c.subarray(0,d):(this.c.length>d&&(this.c.length=d),c=this.c);return this.buffer=c};function W(c,d){var a,b;this.input=c;this.a=0;if(d||!(d={}))d.index&&(this.a=d.index),d.verify&&(this.A=d.verify);a=c[this.a++];b=c[this.a++];switch(a&15){case ha:this.method=ha;break;default:throw Error("unsupported compression method");}if(0!==((a<<8)+b)%31)throw Error("invalid fcheck flag:"+((a<<8)+b)%31);if(b&32)throw Error("fdict flag is not supported");this.q=new w(c,{index:this.a,bufferSize:d.bufferSize,bufferType:d.bufferType,resize:d.resize})}
W.prototype.k=function(){var c=this.input,d,a;d=this.q.k();this.a=this.q.a;if(this.A){a=(c[this.a++]<<24|c[this.a++]<<16|c[this.a++]<<8|c[this.a++])>>>0;var b=d;if("string"===typeof b){var e=b.split(""),f,g;f=0;for(g=e.length;f<g;f++)e[f]=(e[f].charCodeAt(0)&255)>>>0;b=e}for(var h=1,k=0,m=b.length,n,p=0;0<m;){n=1024<m?1024:m;m-=n;do h+=b[p++],k+=h;while(--n);h%=65521;k%=65521}if(a!==(k<<16|h)>>>0)throw Error("invalid adler-32 checksum");}return d};var ha=8;r("Zlib.Inflate",W);r("Zlib.Inflate.prototype.decompress",W.prototype.k);var X={ADAPTIVE:B.s,BLOCK:B.t},Y,Z,$,ia;if(Object.keys)Y=Object.keys(X);else for(Z in Y=[],$=0,X)Y[$++]=Z;$=0;for(ia=Y.length;$<ia;++$)Z=Y[$],r("Zlib.Inflate.BufferType."+Z,X[Z]);}).call(this);
var $R=["Index out of bounds (%d)","File does not contain the SOFA convention","All filters must be enabled","Error reading dimensions","Error seeking first object","Error: unknown data class","Error unsupported compound version (%d)","FHDB type 1 unsupported values","The base address should be zero","Invalid count","The file is not a valid HDF","Invalid Position","Invalid version","Cannot handle huge objects","Cannot handle tiny objects","Position exceeds byte length","Size mismatch","The filter pipeline message has too many filters","Unknown bit width","Unknown datatype (%d)","Unsupported bit precision","Unsupported filter","Unsupported OHDR message flag","Unsupported values","Unsupported version","Unsupported version of attribute info message","Unsupported version of data fill message","Unsupported version of data layout message","Unsupported version of dataspace message","Unsupported version of data type message","Unsupported version of fractal heap","Unsupported version of group info message","Unsupported version of link info message","Unsupported version of custom block","Unsupported version of message attribute","Unsupported version of the filter pipeline message","Wrong signature (%s)","Only a block offset of 0 is supported so far"];function Trim$_String_(s){return s.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}
var TObject={$ClassName:"TObject",$Parent:null,ClassName:function(s){return s.$ClassName},ClassType:function(s){return s},ClassParent:function(s){return s.$Parent},$Init:function(s){},Create:function(s){return s},Destroy:function(s){for(var prop in s)if(s.hasOwnProperty(prop))delete s[prop]},Destroy$:function(s){return s.ClassType.Destroy(s)},Free:function(s){if(s!==null)s.ClassType.Destroy(s)}}
function StrDeleteRight(s,n){return s.substr(0,s.length-n)}
function Log2(x){return Math.log(x)/Math.LN2}
var sprintf=(function(){function get_type(variable){return Object.prototype.toString.call(variable).slice(8,-1).toLowerCase()}
function str_repeat(input,multiplier){for(var output=[];multiplier>0;output[--multiplier]=input){}
return output.join('')}
var str_format=function(){if(!str_format.cache.hasOwnProperty(arguments[0])){str_format.cache[arguments[0]]=str_format.parse(arguments[0])}
return str_format.format.call(null,str_format.cache[arguments[0]],arguments)};str_format.format=function(parse_tree,argv){var cursor=1,tree_length=parse_tree.length,node_type='',arg,output=[],i,k,match,pad,pad_character,pad_length;for(i=0;i<tree_length;i++){node_type=get_type(parse_tree[i]);if(node_type==='string'){output.push(parse_tree[i])}
else if(node_type==='array'){match=parse_tree[i];if(match[2]){arg=argv[cursor];for(k=0;k<match[2].length;k++){if(!arg.hasOwnProperty(match[2][k])){throw(sprintf('[sprintf] property "%s" does not exist',match[2][k]))}
arg=arg[match[2][k]]}}
else if(match[1]){arg=argv[match[1]]}
else{arg=argv[cursor++]}
if(/[^s]/.test(match[8])&&(get_type(arg)!='number')){throw(sprintf('[sprintf] expecting number but found %s',get_type(arg)))}
switch(match[8]){case'b':arg=arg.toString(2);break;case'c':arg=String.fromCharCode(arg);break;case'd':arg=String(parseInt(arg,10));if(match[7]){arg=str_repeat('0',match[7]-arg.length)+arg}break;case'e':arg=match[7]?arg.toExponential(match[7]):arg.toExponential();break;case'f':arg=match[7]?parseFloat(arg).toFixed(match[7]):parseFloat(arg);break;case'o':arg=arg.toString(8);break;case's':arg=((arg=String(arg))&&match[7]?arg.substring(0,match[7]):arg);break;case'u':arg=Math.abs(arg);break;case'x':arg=arg.toString(16);break;case'X':arg=arg.toString(16).toUpperCase();break}
arg=(/[def]/.test(match[8])&&match[3]&&arg>=0?'+'+arg:arg);pad_character=match[4]?match[4]=='0'?'0':match[4].charAt(1):' ';pad_length=match[6]-String(arg).length;pad=match[6]?str_repeat(pad_character,pad_length):'';output.push(match[5]?arg+pad:pad+arg)}}
return output.join('')};str_format.cache={};str_format.parse=function(fmt){var _fmt=fmt,match=[],parse_tree=[],arg_names=0;while(_fmt){if((match=/^[^\x25]+/.exec(_fmt))!==null){parse_tree.push(match[0])}
else if((match=/^\x25{2}/.exec(_fmt))!==null){parse_tree.push('%')}
else if((match=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(_fmt))!==null){if(match[2]){arg_names|=1;var field_list=[],replacement_field=match[2],field_match=[];if((field_match=/^([a-z_][a-z_\d]*)/i.exec(replacement_field))!==null){field_list.push(field_match[1]);while((replacement_field=replacement_field.substring(field_match[0].length))!==''){if((field_match=/^\.([a-z_][a-z_\d]*)/i.exec(replacement_field))!==null){field_list.push(field_match[1])}
else if((field_match=/^\[(\d+)\]/.exec(replacement_field))!==null){field_list.push(field_match[1])}
else{throw('[sprintf] huh?')}}}
else{throw('[sprintf] huh?')}
match[2]=field_list}
else{arg_names|=2}
if(arg_names===3){throw('[sprintf] mixing positional and named placeholders is not (yet) supported')}
parse_tree.push(match)}
else{throw('[sprintf] huh?')}
_fmt=_fmt.substring(match[0].length)}
return parse_tree};return str_format})();function Format(f,a){a.unshift(f);return sprintf.apply(null,a)}
var Exception={$ClassName:"Exception",$Parent:TObject,$Init:function(s){FMessage=""},Create:function(s,Msg){s.FMessage=Msg;return s}}
var EAssertionFailed={$ClassName:"EAssertionFailed",$Parent:Exception,$Init:Exception.$Init}
function Delete(s,i,n){var v=s.v;if((i<=0)||(i>v.length)||(n<=0))return;s.v=v.substr(0,i-1)+v.substr(i+n-1)}
function DegToRad(v){return v*(Math.PI/180)}
function Chr(c){if(c<=0xFFFF)
return String.fromCharCode(c);c-=0x10000;return String.fromCharCode(0xD800+(c>>10))+String.fromCharCode(0xDC00+(c&0x3FF))}
function $New(c){var i={ClassType:c};c.$Init(i);return i}
function $Div(a,b){var r=a/b;return(r>=0)?Math.floor(r):Math.ceil(r)}
function $Assert(b,m,z){if(!b)throw Exception.Create($New(EAssertionFailed),"Assertion failed"+z+((m=="")?"":" : ")+m)}
function $ArraySetLenC(a,n,d){var o=a.length;if(o==n)return;if(o>n)a.length=n;else for(;o<n;o++)a.push(d())}
var Wo={$ClassName:"TStream",$Parent:TObject,$Init:function($){TObject.$Init($);$.pk=null;$.Iq=0},aH:function(S){return S.pk.buffer.byteLength},EZ:function(S){S.Iq=0},Mu:function(S,Ex){S.Iq=0;S.pk=new DataView(Ex);return S},u6:function(S,B8){var R=null;if(S.Iq+B8>S.pk.byteLength){throw Exception.Create($New(Exception),$R[15])}
R=new Uint8Array(S.pk.buffer.slice(S.Iq,S.Iq+B8));(S.Iq+=B8);return R},dY:function(S,K8){var R=0;if(S.Iq+K8>S.pk.byteLength){throw Exception.Create($New(Exception),$R[15])}
switch(K8){case 4:R=S.pk.getFloat32(S.Iq,true);break;case 8:R=S.pk.getFloat64(S.Iq,true);break;default:throw Exception.Create($New(Exception),$R[18])}
(S.Iq+=K8);return R},sI:function(S,Pr){var R=0;if(S.Iq+Pr>S.pk.byteLength){throw Exception.Create($New(Exception),$R[15])}
switch(Pr){case 1:R=S.pk.getUint8(S.Iq);break;case 2:R=S.pk.getUint16(S.Iq,true);break;case 3:R=S.pk.getUint16(S.Iq,true)+(S.pk.getUint8(S.Iq+2)<<16);break;case 4:R=S.pk.getUint32(S.Iq,true);break;case 5:R=S.pk.getUint32(S.Iq,true)|(S.pk.getUint8(S.Iq+4)<<32);break;case 6:R=S.pk.getUint32(S.Iq,true)|(S.pk.getUint16(S.Iq+4,true)<<32);break;case 8:R=S.pk.getUint32(S.Iq,true)|(S.pk.getUint32(S.Iq+4,true)<<32);break;default:throw Exception.Create($New(Exception),$R[18])}
(S.Iq+=Pr);return R},Hr:function(S,wl){var R="";var JN=null;if(S.Iq+wl>S.pk.byteLength){throw Exception.Create($New(Exception),$R[15])}
JN=new TextDecoder();R=JN.decode(S.pk.buffer.slice(S.Iq,S.Iq+wl));if(!R.charCodeAt(R.length-1))R=StrDeleteRight(R,1);(S.Iq+=wl);return R},GJ:function(S,SH,Dx){var R=0;S.Iq=SH+((Dx)?S.Iq:0);if(S.Iq>S.pk.byteLength)S.Iq=S.pk.byteLength;if(S.Iq>S.pk.byteLength){throw Exception.Create($New(Exception),$R[11])}
R=S.Iq;return R},sJ:function(S,wW){var NF=null,au=null;NF=S.pk.buffer;au=new Uint8Array(NF.byteLength+wW.byteLength);au.set(NF,0);au.set(wW,NF.byteLength);S.pk=new DataView(au.buffer);S.Iq=au.byteLength},PU:function(S,TA,Uu){switch(TA){case 1:S.pk.setUint8(S.Iq,Uu);break;case 2:S.pk.setUint16(S.Iq,Uu);break;case 4:S.pk.setUint32(S.Iq,Uu);break;default:throw Exception.Create($New(Exception),$R[9])}
(S.Iq+=TA)},s2:function(S,Zn){var Wz=null;Wz=new TextEncoder();Wo.sJ(S,Wz.encode(Zn))},Destroy:TObject.Destroy};var nJ={$ClassName:"TSofaPositions",$Parent:TObject,$Init:function($){TObject.$Init($);$.As=false;$.kU=[]},O1:function(S){return S.kU.length},pF:function(S,Dd){S.As=Dd;return S},G8:function(S,bI){var R=[0,0,0];if(bI<0||bI>=S.kU.length){throw Exception.Create($New(Exception),Format($R[0],[bI]))}
R=S.kU[bI].slice(0);return R},Ry:function(S,Iv,OK){var R=[0,0,0];R=nJ.G8(S,Iv);if(OK!=S.As){if(OK){R=mC(R.slice(0))}else R=od(R.slice(0))}
return R},D3:function(S,Wh,nw){var Z3=0;var wm=[0,0,0];$Assert(nw==8,"","");var $t1;for(Z3=0,$t1=($Div(Wo.aH(Wh),3*nw));Z3<$t1;Z3++){wm[0]=Wo.dY(Wh,nw);wm[1]=Wo.dY(Wh,nw);wm[2]=Wo.dY(Wh,nw);S.kU.push(wm.slice(0))}},Destroy:TObject.Destroy};var fh={$ClassName:"TSofaFile",$Parent:TObject,$Init:function($){TObject.$Init($);$.kh=$.Kj=$.YF=$.H1=$.Dc=null;$.na=[];$.xL=[];$.DQ=[0,0,0];$.as=[0,0,0];$.lT=$.EX=$.ne=$.mg=$.Vq=$.gt=0;$.Qy=[]},dG:function(S,Wq,dD,CG){var R=0;var Li=[0,0,0],kq=0,F8=0;var CT=0;R=0;Li=nJ.Ry(S.YF,0,false);kq=Math.sqrt((Math.pow(Wq-Li[0],2))+(Math.pow(dD-Li[1],2))+(Math.pow(CG-Li[1],2)));var $t2;for(F8=1,$t2=nJ.O1(S.YF);F8<$t2;F8++){Li=nJ.Ry(S.YF,F8,false);CT=Math.sqrt((Math.pow(Wq-Li[0],2))+(Math.pow(dD-Li[1],2))+(Math.pow(CG-Li[1],2)));if(CT<kq){kq=CT;R=F8}}
return R},xS:function(S,jl,Yx,pO){var R=0;var Ct=[0,0,0];Ct[0]=jl;Ct[1]=Yx;Ct[2]=pO;Ct=od(Ct.slice(0));R=fh.dG(S,Ct[0],Ct[1],Ct[2]);return R},r6:function(S,LA){var R=0;if(LA<0||LA>=S.na.length){throw Exception.Create($New(Exception),Format($R[0],[LA]))}
R=S.na[LA];return R},WV:function(S){return S.na.length},p2:function(S,Ig,hz){return S.xL[Ig][hz]},A6:function(S,Bi){var R=0;if(Bi<0||Bi>=S.Qy.length){throw Exception.Create($New(Exception),Format($R[0],[Bi]))}
R=S.Qy[Bi];return R},j9:function(S){return S.Qy.length},Wp:function(S,G4){var Ug=null;var ZI=0;var V8=0;var tF=null;Ug=Si.gE($New(Si));try{Si.tx(Ug,G4);if(Si.Do(Ug,"Conventions")!="SOFA"){throw Exception.Create($New(Exception),$R[1])}
var $t3;for(ZI=0,$t3=Ky.vS(Ug.mM);ZI<$t3;ZI++){fh.jk(S,Ky.wb(Ug.mM,ZI))}
S.kh=new Map();var $t4;for(V8=0,$t4=Ky.fw(Ug.mM);V8<$t4;V8++){tF=Ky.Cw(Ug.mM,V8);S.kh.set(tF.NH,OM.AP(tF))}}finally{TObject.Free(Ug)}},jk:function(S,CK){var ju=0,QV=0,eK=0,un=false,v4=false,MC=false,gm=false,eI=0,L8=0;var Ny=0;var KW=null,Gn=0;var rA=0,MI=0;var VG=0,y2=0,H2=0;var Zp=0;function Rq(fQ){fQ={v:fQ};var R=0;var AN=0;R=0;AN=(fQ.v.indexOf("This is a netCDF dimension but not a netCDF variable.")+1);if(AN>0){Delete(fQ,AN,53);R=parseInt(Trim$_String_(fQ.v),10)}
return R};CK.GK.Iq=0;if(CK.Oc=="M"){$Assert(Ky.JT(CK,"CLASS")=="DIMENSION_SCALE","","");S.mg=Rq(Ky.JT(CK,"NAME"))}else if(CK.Oc=="R"){$Assert(Ky.JT(CK,"CLASS")=="DIMENSION_SCALE","","");S.Vq=Rq(Ky.JT(CK,"NAME"))}else if(CK.Oc=="E"){$Assert(Ky.JT(CK,"CLASS")=="DIMENSION_SCALE","","");S.EX=Rq(Ky.JT(CK,"NAME"))}else if(CK.Oc=="N"){$Assert(Ky.JT(CK,"CLASS")=="DIMENSION_SCALE","","");S.lT=Rq(Ky.JT(CK,"NAME"))}else if(CK.Oc=="S"){$Assert(Ky.JT(CK,"CLASS")=="DIMENSION_SCALE","","");ju=Rq(Ky.JT(CK,"NAME"))}else if(CK.Oc=="I"){$Assert(Ky.JT(CK,"CLASS")=="DIMENSION_SCALE","","");QV=Rq(Ky.JT(CK,"NAME"))}else if(CK.Oc=="C"){$Assert(Ky.JT(CK,"CLASS")=="DIMENSION_SCALE","","");eK=Rq(Ky.JT(CK,"NAME"))}else if(CK.Oc=="ListenerPosition"){$Assert(Wo.aH(CK.GK)>0,"","");$Assert(CK.Sc.XJ==1,"","");S.ne=$Div(Wo.aH(CK.GK),3*CK.Sc.dr);un=false;if(Ky.kp(CK,"Type"))un=Ky.JT(CK,"Type")=="spherical";S.YF=nJ.pF($New(nJ),un);nJ.D3(S.YF,CK.GK,CK.Sc.dr)}else if(CK.Oc=="ReceiverPosition"){$Assert(Wo.aH(CK.GK)>0,"","");$Assert(CK.Sc.XJ==1,"","");S.Vq=$Div(Wo.aH(CK.GK),3*CK.Sc.dr);v4=false;if(Ky.kp(CK,"Type"))v4=Ky.JT(CK,"Type")=="spherical";S.H1=nJ.pF($New(nJ),v4);nJ.D3(S.H1,CK.GK,CK.Sc.dr)}else if(CK.Oc=="SourcePosition"){$Assert(Wo.aH(CK.GK)>0,"","");$Assert(CK.Sc.XJ==1,"","");S.gt=$Div(Wo.aH(CK.GK),3*CK.Sc.dr);MC=false;if(Ky.kp(CK,"Type"))MC=Ky.JT(CK,"Type")=="spherical";S.Dc=nJ.pF($New(nJ),MC);nJ.D3(S.Dc,CK.GK,CK.Sc.dr)}else if(CK.Oc=="EmitterPosition"){$Assert(Wo.aH(CK.GK)>0,"","");$Assert(CK.Sc.XJ==1,"","");S.EX=$Div(Wo.aH(CK.GK),3*CK.Sc.dr);gm=false;if(Ky.kp(CK,"Type"))gm=Ky.JT(CK,"Type")=="spherical";S.Kj=nJ.pF($New(nJ),gm);nJ.D3(S.Kj,CK.GK,CK.Sc.dr)}else if(CK.Oc=="ListenerUp"){$Assert(Wo.aH(CK.GK)>0,"","");$Assert(CK.Sc.XJ==1,"","");S.DQ[0]=Wo.dY(CK.GK,8);S.DQ[1]=Wo.dY(CK.GK,8);S.DQ[2]=Wo.dY(CK.GK,8)}else if(CK.Oc=="ListenerView"){$Assert(Wo.aH(CK.GK)>0,"","");$Assert(CK.Sc.XJ==1,"","");S.as[0]=Wo.dY(CK.GK,8);S.as[1]=Wo.dY(CK.GK,8);S.as[2]=Wo.dY(CK.GK,8)}else if(CK.Oc=="Data.IR"){$Assert(Wo.aH(CK.GK)>0,"","");eI=(S.mg*S.Vq*S.lT)*8;$Assert(Wo.aH(CK.GK)==eI,"","");$ArraySetLenC(S.xL,S.mg,function(){return[]});var $t5;for(L8=0,$t5=S.mg;L8<$t5;L8++){$ArraySetLenC(S.xL[L8],S.Vq,function(){return null});var $t6;for(Ny=0,$t6=S.Vq;Ny<$t6;Ny++){KW=new Float64Array(S.lT);var $t7;for(Gn=0,$t7=S.lT;Gn<$t7;Gn++){KW[Gn]=Wo.dY(CK.GK,8)}
S.xL[L8][Ny]=KW}}}else if(CK.Oc=="Data.SamplingRate"){$Assert(Wo.aH(CK.GK)>0,"","");rA=$Div(Wo.aH(CK.GK),CK.Sc.dr);var $t8;for(MI=0,$t8=rA;MI<$t8;MI++){VG=Wo.dY(CK.GK,8);S.Qy.push(VG)}}else if(CK.Oc=="Data.Delay"){$Assert(Wo.aH(CK.GK)>0,"","");y2=$Div(Wo.aH(CK.GK),CK.Sc.dr);var $t9;for(H2=0,$t9=y2;H2<$t9;H2++){Zp=Wo.dY(CK.GK,8);S.na.push(Zp)}}},Destroy:TObject.Destroy};var BX={$ClassName:"THdfSuperBlock",$Parent:TObject,$Init:function($){TObject.$Init($);$.A3=$.zv=$.VV=0},nu:function(S,zt){var jM=0,cI="",Z1=0,CX=0,rX=0,Y6=0,lR=0,Ss=0,Ph=0;jM=Wo.sI(zt,1);if(jM!=137){throw Exception.Create($New(Exception),$R[10])}
cI=Wo.Hr(zt,3);if(cI!="HDF"){throw Exception.Create($New(Exception),$R[10])}
Z1=Wo.sI(zt,4);if(Z1!=169478669){throw Exception.Create($New(Exception),$R[10])}
CX=Wo.sI(zt,1);if(!((CX==2||CX==3))){throw Exception.Create($New(Exception),$R[24])}
S.VV=Wo.sI(zt,1);S.zv=Wo.sI(zt,1);rX=Wo.sI(zt,1);Y6=Wo.sI(zt,S.VV);if(Y6){throw Exception.Create($New(Exception),$R[8])}
lR=Wo.sI(zt,S.VV);S.A3=Wo.sI(zt,S.VV);Ss=Wo.sI(zt,S.VV);if(S.A3!=Wo.aH(zt)){throw Exception.Create($New(Exception),$R[16])}
Ph=Wo.sI(zt,4);if(Wo.GJ(zt,Ss,false)!=Ss){throw Exception.Create($New(Exception),$R[4])}},Destroy:TObject.Destroy};var J7={$ClassName:"THdfDataObjectMessage",$Parent:TObject,$Init:function($){TObject.$Init($);$.c2=$.Sn=null;$.mt=0},sp:function(S,Ap,Fo){S.Sn=Ap;S.c2=Fo;return S},wR:function(S,i4){S.mt=Wo.sI(i4,1)},Destroy:TObject.Destroy,wR$:function($){return $.ClassType.wR.apply($.ClassType,arguments)}};var VT={$ClassName:"THdfMessageLinkInfo",$Parent:J7,$Init:function($){J7.$Init($);$.J6=0},wR:function(S,fM){var Jl=0,py=0;J7.wR(S,fM);if(S.mt){throw Exception.Create($New(Exception),$R[32])}
Jl=Wo.sI(fM,1);if(Jl&1)Wo.sI(fM,8);S.J6=Wo.sI(fM,S.Sn.VV);py=Wo.sI(fM,S.Sn.VV);if(Jl&2)Wo.sI(fM,S.Sn.VV)},Destroy:TObject.Destroy,wR$:function($){return $.ClassType.wR.apply($.ClassType,arguments)}};var lo={$ClassName:"THdfMessageHeaderContinuation",$Parent:J7,$Init:function($){J7.$Init($)},wR:function(S,Cp){var vR=0,Jq=0,hv=0,HL="";vR=Wo.sI(Cp,S.Sn.VV);Jq=Wo.sI(Cp,S.Sn.zv);hv=Cp.Iq;Cp.Iq=vR;HL=Wo.Hr(Cp,4);if(HL!="OCHK"){throw Exception.Create($New(Exception),Format($R[36],[HL]))}
Ky.bc(S.c2,Cp,vR+Jq);Cp.Iq=hv},Destroy:TObject.Destroy,wR$:function($){return $.ClassType.wR.apply($.ClassType,arguments)}};var Lr={$ClassName:"THdfMessageGroupInfo",$Parent:J7,$Init:function($){J7.$Init($)},wR:function(S,rH){var Qp=0,gK=0,Wg=0,et=0,L1=0;J7.wR(S,rH);if(S.mt){throw Exception.Create($New(Exception),$R[31])}
Qp=Wo.sI(rH,1);if(Qp&1){gK=Wo.sI(rH,2);Wg=Wo.sI(rH,2)}
if(Qp&2){et=Wo.sI(rH,2);L1=Wo.sI(rH,2)}},Destroy:TObject.Destroy,wR$:function($){return $.ClassType.wR.apply($.ClassType,arguments)}};var Cg={$ClassName:"THdfMessageFilterPipeline",$Parent:J7,$Init:function($){J7.$Init($)},wR:function(S,Yd){var BS=0,Zl=0;var G2=0,b3=0,gw=0;J7.wR(S,Yd);if(S.mt!=2){throw Exception.Create($New(Exception),$R[35])}
BS=Wo.sI(Yd,1);if(BS>32){throw Exception.Create($New(Exception),$R[17])}
var $tA;for(Zl=0,$tA=BS;Zl<$tA;Zl++){G2=Wo.sI(Yd,2);if(([1,2].indexOf(~G2)>=0)){throw Exception.Create($New(Exception),$R[21])}
b3=Wo.sI(Yd,2);gw=Wo.sI(Yd,2);Wo.GJ(Yd,gw*4,true)}},Destroy:TObject.Destroy,wR$:function($){return $.ClassType.wR.apply($.ClassType,arguments)}};var ob={$ClassName:"THdfMessageDataType",$Parent:J7,$Init:function($){J7.$Init($);$.se=[0,0,0];$.XJ=$.dr=0;$.GZ=null},wR:function(S,RO){J7.wR(S,RO);S.XJ=S.mt&15;S.mt=S.mt>>>4;if(!((S.mt==1||S.mt==3))){throw Exception.Create($New(Exception),$R[29])}
S.se[0]=Wo.sI(RO,1);S.se[1]=Wo.sI(RO,1);S.se[2]=Wo.sI(RO,1);S.dr=Wo.sI(RO,4);switch(S.XJ){case 0:S.GZ=EC.Vk$($New(O2),S);break;case 1:S.GZ=EC.Vk$($New(cU),S);break;case 2:S.GZ=EC.Vk$($New(gv),S);break;case 3:S.GZ=EC.Vk$($New(Vi),S);break;case 4:S.GZ=EC.Vk$($New(fx),S);break;case 5:S.GZ=EC.Vk$($New(c5),S);break;case 6:S.GZ=EC.Vk$($New(nK),S);break;case 7:S.GZ=EC.Vk$($New(nf),S);break;case 8:S.GZ=EC.Vk$($New(kt),S);break;case 9:S.GZ=EC.Vk$($New(Ez),S);break;case 10:S.GZ=EC.Vk$($New(FA),S);break;default:throw Exception.Create($New(Exception),Format($R[19],[S.XJ]))}
if(S.GZ)EC.w8$(S.GZ,RO)},Destroy:TObject.Destroy,wR$:function($){return $.ClassType.wR.apply($.ClassType,arguments)}};var uB={$ClassName:"THdfMessageDataSpace",$Parent:J7,$Init:function($){J7.$Init($);$.Om=$.C9=$.lp=0;$.kB=[];$.AL=[]},wR:function(S,mb){var Hh=0;var Q6=0,h1=0;J7.wR(S,mb);if(!((S.mt==1||S.mt==2))){throw Exception.Create($New(Exception),$R[28])}
S.Om=Wo.sI(mb,1);S.C9=Wo.sI(mb,1);if(S.mt==1){Wo.GJ(mb,5,true);throw Exception.Create($New(Exception),$R[28])}
S.lp=Wo.sI(mb,1);var $tB;for(Hh=0,$tB=S.Om;Hh<$tB;Hh++){Q6=Wo.sI(mb,S.Sn.zv);S.AL.push(Q6)}
if(S.C9&1){var $tC;for(Hh=0,$tC=S.Om;Hh<$tC;Hh++){h1=Wo.sI(mb,S.Sn.zv);S.kB.push(h1)}}},Destroy:TObject.Destroy,wR$:function($){return $.ClassType.wR.apply($.ClassType,arguments)}};var Ew={$ClassName:"THdfMessageDataLayout",$Parent:J7,$Init:function($){J7.$Init($);$.aa=$.x9=$.Mn=$.jS=0},DB:function(S,V5,CI){var jY=0;var Aj=[],NU="",Ws=0,DH=0,IU=0,dj=0,Gj=0,PF=0,lf=0;var iT=0,fp=null,bR=0;var Mo=0,Ka=0,vA=0;var Pd=0,Ac=0,zi=0,Ek=0,FY=null,zq=null,UD=null,YB=0,Jw=0;var eu=0,nR=0,UX=0,BV=0,d9=0,BN=0;var uM=0,LD=0,In=0,mr=0,Jj=0,CP=0,Tp=0,Y4=0,RA=0;var JD=0,ei=0,rL=0,Ye=0,Nj=0;if(S.c2.DY.Om>3){throw Exception.Create($New(WJ),$R[3])}
NU=Wo.Hr(V5,4);if(NU!="TREE"){throw Exception.Create($New(Exception),Format($R[36],[NU]))}
Ws=Wo.sI(V5,1);DH=Wo.sI(V5,1);IU=Wo.sI(V5,2);dj=Wo.sI(V5,S.Sn.VV);Gj=Wo.sI(V5,S.Sn.VV);PF=1;var $tD;for(lf=0,$tD=S.c2.DY.Om;lf<$tD;lf++){PF*=Ky.m2(S.c2,lf)}
iT=Ky.m2(S.c2,S.c2.DY.Om);fp=new Uint8Array(CI);var $tE;for(bR=0,$tE=(IU*2);bR<$tE;bR++){if(!Ws){jY=Wo.sI(V5,S.Sn.zv)}else{Mo=Wo.sI(V5,4);Ka=Wo.sI(V5,4);if(Ka){throw Exception.Create($New(Exception),$R[2])}
Aj.length=0;var $tF;for(vA=0,$tF=S.c2.DY.Om;vA<$tF;vA++){Pd=Wo.sI(V5,8);Aj.push(Pd)}
Ac=Wo.sI(V5,8);if(Ac)break;zi=Wo.sI(V5,S.Sn.VV);Ek=V5.Iq;V5.Iq=zi;FY=Wo.u6(V5,Mo);zq=new Zlib.Inflate(FY);UD=zq.decompress();$Assert(UD.byteLength==PF*iT,"","");switch(S.c2.DY.Om){case 1:YB=S.c2.DY.AL[0];var $tG;for(Jw=0,$tG=(PF*iT);Jw<$tG;Jw++){eu=$Div(Jw,PF);nR=Jw%PF+Aj[0];if(nR<YB)fp[(nR*iT+eu)]=UD[Jw]}
break;case 2:UX=S.c2.DY.AL[0];BV=S.c2.DY.AL[1];d9=Ky.m2(S.c2,1);var $tH;for(BN=0,$tH=(PF*iT);BN<$tH;BN++){uM=$Div(BN,PF);LD=BN%PF;In=LD%d9+Aj[1];LD=($Div(LD,d9))+Aj[0];if(In<BV&&LD<UX)fp[((LD*BV+In)*iT+uM)]=UD[BN]}
break;case 3:mr=S.c2.DY.AL[0];Jj=S.c2.DY.AL[1];CP=S.c2.DY.AL[2];Tp=Ky.m2(S.c2,1);Y4=Ky.m2(S.c2,2);var $tI;for(RA=0,$tI=(PF*iT);RA<$tI;RA++){JD=$Div(RA,PF);ei=RA%PF;rL=ei%Y4+Aj[2];Ye=($Div(ei,Y4))%Tp+Aj[1];ei=($Div(ei,Tp*Y4))+Aj[0];if(rL<CP&&Ye<Jj&&ei<mr)fp[((ei*CP*Jj+Ye*CP+rL)*iT+JD)]=UD[RA]}
break}
V5.Iq=Ek}}
Wo.sJ(S.c2.GK,fp);Nj=Wo.sI(V5,4)},wR:function(S,ib){var cM=0;var lJ=0;var yR=0;var Ks=0;J7.wR(S,ib);if(S.mt!=3){throw Exception.Create($New(Exception),$R[27])}
S.aa=Wo.sI(ib,1);switch(S.aa){case 0:S.Mn=Wo.sI(ib,2);Wo.sJ(S.c2.GK,Wo.u6(ib,S.Mn));break;case 1:S.x9=Wo.sI(ib,S.Sn.VV);S.Mn=Wo.sI(ib,S.Sn.zv);if(S.x9>0){lJ=ib.Iq;ib.Iq=S.x9;Wo.sJ(S.c2.GK,Wo.u6(ib,S.Mn));ib.Iq=lJ}
break;case 2:S.jS=Wo.sI(ib,1);S.x9=Wo.sI(ib,S.Sn.VV);var $tJ;for(cM=0,$tJ=S.jS;cM<$tJ;cM++){Ks=Wo.sI(ib,4);S.c2.dC.push(Ks)}
yR=S.c2.dC[S.jS-1];var $tK;for(cM=0,$tK=S.c2.DY.Om;cM<$tK;cM++){yR*=S.c2.DY.AL[cM]}
if(S.x9>0&&S.x9<S.Sn.A3){lJ=ib.Iq;ib.Iq=S.x9;Ew.DB(S,ib,yR);ib.Iq=lJ}
break}},Destroy:TObject.Destroy,wR$:function($){return $.ClassType.wR.apply($.ClassType,arguments)}};var W7={$ClassName:"THdfMessageDataFill",$Parent:J7,$Init:function($){J7.$Init($)},wR:function(S,sN){var wh=0,aG=0;J7.wR(S,sN);if(S.mt!=3){throw Exception.Create($New(Exception),$R[26])}
wh=Wo.sI(sN,1);if(wh&(1<<5)){aG=Wo.sI(sN,4);Wo.GJ(sN,aG,true)}},Destroy:TObject.Destroy,wR$:function($){return $.ClassType.wR.apply($.ClassType,arguments)}};var Mt={$ClassName:"THdfMessageAttributeInfo",$Parent:J7,$Init:function($){J7.$Init($);$.X4=0},wR:function(S,ua){var EK=0,jf=0;J7.wR(S,ua);if(S.mt){throw Exception.Create($New(Exception),$R[25])}
EK=Wo.sI(ua,1);if(EK&1)Wo.sI(ua,2);S.X4=Wo.sI(ua,S.Sn.VV);jf=Wo.sI(ua,S.Sn.VV);if(EK&2)Wo.sI(ua,S.Sn.VV)},Destroy:TObject.Destroy,wR$:function($){return $.ClassType.wR.apply($.ClassType,arguments)}};var Yt={$ClassName:"THdfMessageAttribute",$Parent:J7,$Init:function($){J7.$Init($);$.cQ="";$.Hd=$.br=null},WG:function(S,Iu,tZ){switch(S.Hd.XJ){case 3:OM.QM(tZ,Wo.Hr(Iu,S.Hd.dr));break;case 6:Wo.GJ(Iu,S.Hd.dr,true);break;case 7:OM.ll(tZ,Wo.sI(Iu,4));break;case 9:Wo.GJ(Iu,16,true);break;default:throw Exception.Create($New(Exception),$R[5])}},lA:function(S,m3,TG,gb){var pP=0;if(S.br.AL.length>0){var $tL;for(pP=0,$tL=S.br.AL[0];pP<$tL;pP++){if(1<S.br.Om){Yt.lA(S,m3,TG,gb+1)}else Yt.WG(S,m3,TG)}}},wR:function(S,yK){var Ev=0,wd=0,CS=0,h7=0,uQ=0,fy=null;J7.wR(S,yK);if(S.mt!=3){throw Exception.Create($New(Exception),$R[34])}
Ev=Wo.sI(yK,1);wd=Wo.sI(yK,2);CS=Wo.sI(yK,2);h7=Wo.sI(yK,2);uQ=Wo.sI(yK,1);S.cQ=Wo.Hr(yK,wd);S.Hd=J7.sp($New(ob),S.Sn,S.c2);J7.wR$(S.Hd,yK);S.br=J7.sp($New(uB),S.Sn,S.c2);J7.wR$(S.br,yK);fy=OM.WZ($New(OM),S.cQ);Ky.BY(S.c2,fy);if(!S.br.Om){Yt.WG(S,yK,fy)}else Yt.lA(S,yK,fy,0)},Destroy:TObject.Destroy,wR$:function($){return $.ClassType.wR.apply($.ClassType,arguments)}};var N6={$ClassName:"THdfCustomBlock",$Parent:TObject,$Init:function($){TObject.$Init($);$.R9=$.s5=0;$.r8=$.yp=$.qW=null},h6:function(S,wK,pU,eH){S.qW=wK;S.yp=pU;S.r8=eH;return S},Qa:function(S,zk){var EE="",d2=0,qf=0;EE=Wo.Hr(zk,4);if(EE!=N6.Mk$(S.ClassType)){throw Exception.Create($New(Exception),Format($R[36],[EE]))}
d2=Wo.sI(zk,1);if(d2){throw Exception.Create($New(Exception),$R[33])}
qf=Wo.sI(zk,S.qW.VV);S.R9=0;S.R9=Wo.sI(zk,$Div(S.yp.aF+7,8))},Destroy:TObject.Destroy,h6$:function($){return $.ClassType.h6.apply($.ClassType,arguments)},Mk$:function($){return $.Mk($)},Qa$:function($){return $.ClassType.Qa.apply($.ClassType,arguments)}};var iP={$ClassName:"THdfIndirectBlock",$Parent:N6,$Init:function($){N6.$Init($);$.KS=0},Mk:function(S){return"FHIB"},h6:function(S,Hk,xl,e9){N6.h6(S,Hk,xl,e9);S.KS=xl.Fq;return S},Qa:function(S,Kr){var mo=0;var ul=0;var Hn=0;var co=0;var tY=0;var ZY=0;var r7=0;var EQ=null;var Ru=0;N6.Qa(S,Kr);if(S.R9){throw Exception.Create($New(Exception),$R[37])}
mo=Math.round(Log2(S.KS)-Log2(S.yp.Fq))+1;Ru=Math.round(Log2(S.yp.i7)-Log2(S.yp.Fq))+2;if(mo<Ru){ul=mo*S.yp.LC}else ul=Ru*S.yp.LC;Hn=ul-Ru*S.yp.LC;while(ul>0){co=0;co=Wo.sI(Kr,S.qW.VV);if(S.yp.Rr>0){tY=Wo.sI(Kr,S.qW.zv);ZY=Wo.sI(Kr,4)}
if(co>0&&co<S.qW.A3){r7=Kr.Iq;Kr.Iq=co;EQ=N6.h6$($New(pz),S.qW,S.yp,S.r8);N6.Qa$(EQ,Kr);Kr.Iq=r7}
--ul}
while(Hn>0){co=0;co=Wo.sI(Kr,S.qW.VV);if(co>0&&co<S.qW.A3){r7=Kr.Iq;Kr.Iq=co;EQ=N6.h6$($New(iP),S.qW,S.yp,S.r8);N6.Qa$(EQ,Kr);Kr.Iq=r7}
--Hn}},Destroy:TObject.Destroy,h6$:function($){return $.ClassType.h6.apply($.ClassType,arguments)},Mk$:function($){return $.Mk($)},Qa$:function($){return $.ClassType.Qa.apply($.ClassType,arguments)}};var K5={$ClassName:"THdfFractalHeap",$Parent:TObject,$Init:function($){TObject.$Init($);$.U8=$.y9=$.GB=$.sP=$.jT=$.Rr=$.Yl=$.s7=$.i7=$.aF=$.lN=$.Ne=$.YQ=$.CO=$.FK=$.Y5=$.fK=$.Pj=$.Fq=$.LC=$.fm=0;$.qP=$.J4=null;$.Ms=""},CL:function(S,cj,Nb){S.J4=cj;S.qP=Nb;return S},G5:function(S,rr){var n5=null;var LX=0,Mj=0,db=0;S.Ms=Wo.Hr(rr,4);if(S.Ms!="FRHP"){throw Exception.Create($New(Exception),Format($R[36],[S.Ms]))}
S.fm=Wo.sI(rr,1);if(S.fm){throw Exception.Create($New(Exception),$R[30])}
S.s7=Wo.sI(rr,2);S.Rr=Wo.sI(rr,2);S.Yl=Wo.sI(rr,1);S.lN=Wo.sI(rr,4);S.Ne=Wo.sI(rr,S.J4.zv);S.jT=Wo.sI(rr,S.J4.VV);S.GB=Wo.sI(rr,S.J4.zv);S.U8=Wo.sI(rr,S.J4.VV);S.sP=Wo.sI(rr,S.J4.zv);S.y9=Wo.sI(rr,S.J4.zv);S.Y5=Wo.sI(rr,S.J4.zv);S.CO=Wo.sI(rr,S.J4.zv);S.fK=Wo.sI(rr,S.J4.zv);S.YQ=Wo.sI(rr,S.J4.zv);S.Pj=Wo.sI(rr,S.J4.zv);S.FK=Wo.sI(rr,S.J4.zv);S.LC=Wo.sI(rr,2);S.Fq=Wo.sI(rr,S.J4.zv);S.i7=Wo.sI(rr,S.J4.zv);S.aF=Wo.sI(rr,2);LX=Wo.sI(rr,2);Mj=Wo.sI(rr,S.J4.VV);db=Wo.sI(rr,2);if(S.Rr>0)Wo.GJ(rr,S.J4.zv+4,true);if(S.YQ>0){throw Exception.Create($New(Exception),$R[13])}
if(S.FK>0){throw Exception.Create($New(Exception),$R[14])}
if(Mj>0&&Mj<S.J4.A3){rr.Iq=Mj;if(db){n5=N6.h6$($New(iP),S.J4,S,S.qP)}else n5=N6.h6$($New(pz),S.J4,S,S.qP);N6.Qa$(n5,rr)}},Destroy:TObject.Destroy};var Si={$ClassName:"THdfFile",$Parent:TObject,$Init:function($){TObject.$Init($);$.mM=$.pQ=null},gE:function(S){TObject.Create(S);S.pQ=TObject.Create($New(BX));S.mM=Ky.GY($New(Ky),S.pQ);return S},Do:function(S,Od){return Ky.JT(S.mM,Od)},tx:function(S,v7){Si.RH(S,Wo.Mu($New(Wo),v7))},RH:function(S,Y7){BX.nu(S.pQ,Y7);Ky.WS(S.mM,Y7)},Destroy:TObject.Destroy};var pz={$ClassName:"THdfDirectBlock",$Parent:N6,$Init:function($){N6.$Init($)},Mk:function(S){return"FHDB"},Qa:function(S,Zj){var KX=0;var zf=0;var sl=0;var NZ=0;var yA=0;var nP=null;var Qh=0,Bp=0,ze=0,aU="",kE=0,xg=0,uk="",mL=null,ny=0,I3="";N6.Qa(S,Zj);if(S.yp.Yl&2)S.s5=Wo.sI(Zj,4);KX=Math.ceil(Log2(S.yp.aF)/8);if(S.yp.i7<S.yp.lN){zf=Math.ceil(Log2(S.yp.i7)/8)}else zf=Math.ceil(Log2(S.yp.lN)/8);do{sl=Wo.sI(Zj,1);Qh=Wo.sI(Zj,KX);Bp=Wo.sI(Zj,zf);if(sl==3){ze=Wo.sI(Zj,5);if(ze!=262152){throw Exception.Create($New(Exception),$R[23])}
aU=Wo.Hr(Zj,Bp);ze=Wo.sI(Zj,4);if(ze!=19){throw Exception.Create($New(Exception),$R[23])}
Bp=Wo.sI(Zj,2);kE=Wo.sI(Zj,4);xg=Wo.sI(Zj,2);uk="";if(kE==131072&&(xg==0))uk=Wo.Hr(Zj,Bp);mL=OM.WZ($New(OM),aU);OM.QM(mL,uk);Ky.BY(S.r8,mL)}else if(sl==1){ny=Wo.sI(Zj,6);if(ny){throw Exception.Create($New(Exception),$R[7])}
Bp=Wo.sI(Zj,1);I3=Wo.Hr(Zj,Bp);NZ=Wo.sI(Zj,S.qW.VV);yA=Zj.Iq;Zj.Iq=NZ;nP=Ky.cO($New(Ky),S.qW,I3);Ky.WS(nP,Zj);Ky.Q9(S.r8,nP);Zj.Iq=yA}}while(!(sl==0))},Destroy:TObject.Destroy,h6:N6.h6,Mk$:function($){return $.Mk($)},Qa$:function($){return $.ClassType.Qa.apply($.ClassType,arguments)}};var EC={$ClassName:"THdfBaseDataType",$Parent:TObject,$Init:function($){TObject.$Init($);$.zs=null},Vk:function(S,BQ){S.zs=BQ;return S},w8:function(S,Ni){},Destroy:TObject.Destroy,Vk$:function($){return $.ClassType.Vk.apply($.ClassType,arguments)},w8$:function($){return $.ClassType.w8.apply($.ClassType,arguments)}};var Ez={$ClassName:"THdfDataTypeVariableLength",$Parent:EC,$Init:function($){EC.$Init($);$.iV=null},Vk:function(S,Ds){EC.Vk(S,Ds);S.iV=J7.sp($New(ob),S.zs.Sn,S.zs.c2);return S},w8:function(S,Xg){J7.wR$(S.iV,Xg)},Destroy:TObject.Destroy,Vk$:function($){return $.ClassType.Vk.apply($.ClassType,arguments)},w8$:function($){return $.ClassType.w8.apply($.ClassType,arguments)}};var gv={$ClassName:"THdfDataTypeTime",$Parent:EC,$Init:function($){EC.$Init($)},w8:function(S,IZ){var Ja=0;Ja=Wo.sI(IZ,2)},Destroy:TObject.Destroy,Vk:EC.Vk,w8$:function($){return $.ClassType.w8.apply($.ClassType,arguments)}};var Vi={$ClassName:"THdfDataTypeString",$Parent:EC,$Init:function($){EC.$Init($)},Destroy:TObject.Destroy,Vk:EC.Vk,w8:EC.w8};var nf={$ClassName:"THdfDataTypeReference",$Parent:EC,$Init:function($){EC.$Init($)},Destroy:TObject.Destroy,Vk:EC.Vk,w8:EC.w8};var c5={$ClassName:"THdfDataTypeOpaque",$Parent:EC,$Init:function($){EC.$Init($)},Destroy:TObject.Destroy,Vk:EC.Vk,w8:EC.w8};var cU={$ClassName:"THdfDataTypeFloatingPoint",$Parent:EC,$Init:function($){EC.$Init($)},w8:function(S,Kf){var M6=0,Bc=0,BH=0,vr=0,Wn=0,Xz=0,kM=0;M6=Wo.sI(Kf,2);Bc=Wo.sI(Kf,2);BH=Wo.sI(Kf,1);vr=Wo.sI(Kf,1);Wn=Wo.sI(Kf,1);Xz=Wo.sI(Kf,1);kM=Wo.sI(Kf,4);$Assert((M6==0),"","");$Assert((Wn==0),"","");if(Bc==32){$Assert(BH==23,"","");$Assert(vr==8,"","");$Assert(Xz==23,"","");$Assert(kM==127,"","")}else if(Bc==64){$Assert(BH==52,"","");$Assert(vr==11,"","");$Assert(Xz==52,"","");$Assert(kM==1023,"","")}else{throw Exception.Create($New(Exception),$R[20])}},Destroy:TObject.Destroy,Vk:EC.Vk,w8$:function($){return $.ClassType.w8.apply($.ClassType,arguments)}};var O2={$ClassName:"THdfDataTypeFixedPoint",$Parent:EC,$Init:function($){EC.$Init($)},w8:function(S,ZP){var Le=0,os=0;EC.w8(S,ZP);Le=Wo.sI(ZP,2);os=Wo.sI(ZP,2)},Destroy:TObject.Destroy,Vk:EC.Vk,w8$:function($){return $.ClassType.w8.apply($.ClassType,arguments)}};var kt={$ClassName:"THdfDataTypeEnumerated",$Parent:EC,$Init:function($){EC.$Init($)},Destroy:TObject.Destroy,Vk:EC.Vk,w8:EC.w8};var Bv={$ClassName:"THdfDataTypeCompoundPart",$Parent:TObject,$Init:function($){TObject.$Init($);$.Xr="";$.SF=$.CW=0;$.YP=null},U7:function(S,p1){S.YP=J7.sp($New(ob),p1.Sn,p1.c2);S.CW=p1.dr;return S},jc:function(S,NR){var fu=0;var LQ=0;var Lj=0;S.Xr="";do{LQ=Wo.sI(NR,1);S.Xr=S.Xr+Chr(LQ)}while(!(LQ==0));fu=0;do{Lj=Wo.sI(NR,1);S.SF+=Lj<<(fu*8);++fu}while(!((1<<(fu*8))>S.CW));J7.wR$(S.YP,NR)},Destroy:TObject.Destroy};var nK={$ClassName:"THdfDataTypeCompound",$Parent:EC,$Init:function($){EC.$Init($);$.eS=[]},Vk:function(S,EN){EC.Vk(S,EN);return S},w8:function(S,FF){var WI=0;var wH=0;var xG=null;if(S.zs.mt!=3){throw Exception.Create($New(Exception),Format($R[6],[S.zs.mt]))}
wH=(S.zs.se[1]<<8)+S.zs.se[0];var $tM;for(WI=0,$tM=wH;WI<$tM;WI++){xG=Bv.U7($New(Bv),S.zs);Bv.jc(xG,FF);S.eS.push(xG)}},Destroy:TObject.Destroy,Vk$:function($){return $.ClassType.Vk.apply($.ClassType,arguments)},w8$:function($){return $.ClassType.w8.apply($.ClassType,arguments)}};var fx={$ClassName:"THdfDataTypeBitfield",$Parent:EC,$Init:function($){EC.$Init($)},w8:function(S,ms){var X9=0,QQ=0;X9=Wo.sI(ms,2);QQ=Wo.sI(ms,2)},Destroy:TObject.Destroy,Vk:EC.Vk,w8$:function($){return $.ClassType.w8.apply($.ClassType,arguments)}};var FA={$ClassName:"THdfDataTypeArray",$Parent:EC,$Init:function($){EC.$Init($)},Destroy:TObject.Destroy,Vk:EC.Vk,w8:EC.w8};var Ky={$ClassName:"THdfDataObject",$Parent:TObject,$Init:function($){TObject.$Init($);$.ev=$.YE=$.GK=$.DY=$.Sc=$.gI=$.zV=$.t8=$.gh=null;$.xK=[];$.zd=$.Jo=0;$.dC=[];$.oT=[];$.Oc=""},BY:function(S,t6){S.xK.push(t6)},Q9:function(S,xW){S.oT.push(xW)},cO:function(S,rh,v1){Ky.GY(S,rh);S.Oc=v1;return S},GY:function(S,lr){S.gh=lr;S.Oc="";S.Sc=J7.sp($New(ob),S.gh,S);S.DY=J7.sp($New(uB),S.gh,S);S.zV=J7.sp($New(VT),S.gh,S);S.gI=J7.sp($New(Lr),S.gh,S);S.ev=J7.sp($New(Mt),S.gh,S);S.YE=K5.CL($New(K5),S.gh,S);S.t8=K5.CL($New(K5),S.gh,S);S.GK=Wo.Mu($New(Wo),new ArrayBuffer(0));return S},JT:function(S,YU){var R="";var ZO=0;R="";var $tN;for(ZO=0,$tN=Ky.fw(S);ZO<$tN;ZO++){if(Ky.Cw(S,ZO).NH==YU)return OM.AP(Ky.Cw(S,ZO))}
return R},fw:function(S){return S.xK.length},Cw:function(S,OD){var R=null;if(OD<0||OD>=S.xK.length){throw Exception.Create($New(Exception),Format($R[0],[OD]))}
R=S.xK[OD];return R},m2:function(S,zY){var R=0;if(zY<0||zY>=S.dC.length){throw Exception.Create($New(Exception),Format($R[0],[zY]))}
R=S.dC[zY];return R},wb:function(S,Il){var R=null;if(Il<0||Il>=S.oT.length){throw Exception.Create($New(Exception),Format($R[0],[Il]))}
R=S.oT[Il];return R},vS:function(S){return S.oT.length},kp:function(S,ZX){var R=false;var Gk=0;R=false;var $tO;for(Gk=0,$tO=Ky.fw(S);Gk<$tO;Gk++){if(Ky.Cw(S,Gk).NH==ZX)return true}
return R},WS:function(S,PG){var Ef="",NL=0,ew=0,AH=0;Ef=Wo.Hr(PG,4);if(Ef!="OHDR"){throw Exception.Create($New(Exception),Format($R[36],[Ef]))}
NL=Wo.sI(PG,1);if(NL!=2){throw Exception.Create($New(Exception),$R[12])}
S.Jo=Wo.sI(PG,1);if(S.Jo&(1<<5))Wo.GJ(PG,16,true);if(S.Jo&(1<<4)){ew=Wo.sI(PG,2);AH=Wo.sI(PG,2)}
S.zd=Wo.sI(PG,1<<(S.Jo&3));Ky.bc(S,PG,PG.Iq+S.zd);if(S.ev.X4>0&&S.ev.X4<S.gh.A3){PG.Iq=S.ev.X4;K5.G5(S.YE,PG)}
if(S.zV.J6>0&&S.zV.J6<S.gh.A3){PG.Iq=S.zV.J6;K5.G5(S.t8,PG)}},bc:function(S,MX,SB){var vX=0;var fg=0;var Pz=0;var Rm=0;var N4=null;while(MX.Iq<SB-4){vX=Wo.sI(MX,1);fg=Wo.sI(MX,2);Pz=Wo.sI(MX,1);if(Pz&(~5)){throw Exception.Create($New(Exception),$R[22])}
if(S.Jo&(1<<2))Wo.GJ(MX,2,true);Rm=MX.Iq+fg;N4=null;switch(vX){case 0:Wo.GJ(MX,fg,true);break;case 1:N4=S.DY;break;case 2:N4=S.zV;break;case 3:N4=S.Sc;break;case 5:N4=J7.sp($New(W7),S.gh,S);break;case 8:N4=J7.sp($New(Ew),S.gh,S);break;case 10:N4=S.gI;break;case 11:N4=J7.sp($New(Cg),S.gh,S);break;case 12:N4=J7.sp($New(Yt),S.gh,S);break;case 16:N4=J7.sp($New(lo),S.gh,S);break;case 21:N4=S.ev;break;default:throw Exception.Create($New(Exception),("Unknown header message ("+vX.toString()+")"))}
if(N4)J7.wR$(N4,MX);if(MX.Iq!=Rm){$Assert(MX.Iq==Rm,"","")}}},Destroy:TObject.Destroy};var OM={$ClassName:"THdfAttribute",$Parent:TObject,$Init:function($){TObject.$Init($);$.NH="";$.Is=null},WZ:function(S,bQ){S.NH=bQ;S.Is=Wo.Mu($New(Wo),new ArrayBuffer(0));return S},Ju:function(S){var R=0;S.Is.Iq=0;R=Wo.sI(S.Is,4);return R},AP:function(S){var R="";if(!Wo.aH(S.Is)){R="";return R}
S.Is.Iq=0;R=Wo.Hr(S.Is,Wo.aH(S.Is));return R},ll:function(S,cp){Wo.EZ(S.Is);Wo.PU(S.Is,4,cp)},QM:function(S,lG){Wo.EZ(S.Is);Wo.s2(S.Is,lG)},Destroy:TObject.Destroy};function od(Us){var R=[0,0,0];R[0]=Us[2]*Math.cos(DegToRad(Us[1]))*Math.cos(DegToRad(Us[0]));R[1]=Us[2]*Math.cos(DegToRad(Us[1]))*Math.sin(DegToRad(Us[0]));R[2]=Us[2]*Math.sin(DegToRad(Us[1]));return R};SphericalToCartesian=od;function wU(Rv){var R=null;R=TObject.Create($New(fh));fh.Wp(R,Rv);return R};sofaLoadFile=wU;function VJ(Gy,XW){var R=[];var Ti=0;var $tP;for(Ti=0,$tP=Gy.gt;Ti<$tP;Ti++){R.push(nJ.Ry(Gy.Dc,Ti,XW))}
return R};sofaGetSourcePositionList=VJ;function mR(YS,JR,fR){var iC=0;var $tQ;for(iC=0,$tQ=YS.gt;iC<$tQ;iC++){JR(nJ.Ry(YS.Dc,iC,fR))}};sofaGetSourcePosition=mR;function Tq(LY){var R=[];var Tx=0;var $tR;for(Tx=0,$tR=fh.WV(LY);Tx<$tR;Tx++){R.push(fh.r6(LY,Tx))}
return R};sofaGetSofaDelays=Tq;function I9(IG){var R=[];var Vr=0;var $tS;for(Vr=0,$tS=fh.j9(IG);Vr<$tS;Vr++){R.push(fh.A6(IG,Vr))}
return R};sofaGetSampleRates=I9;function V2(hT,i9){var R=[];var D9=0;var $tT;for(D9=0,$tT=hT.Vq;D9<$tT;D9++){R.push(nJ.Ry(hT.H1,D9,i9))}
return R};sofaGetReceiverPositionList=V2;function Ga(wq,ln,Or){var vx=0;var $tU;for(vx=0,$tU=wq.Vq;vx<$tU;vx++){ln(nJ.Ry(wq.H1,vx,Or))}};sofaGetReceiverPosition=Ga;function rt(w7,Wi){var R=[];var TE=0;var $tV;for(TE=0,$tV=w7.ne;TE<$tV;TE++){R.push(nJ.Ry(w7.YF,TE,Wi))}
return R};sofaGetListenerPositionList=rt;function JV(qi,DS,wr){var AO=0;var $tW;for(AO=0,$tW=qi.ne;AO<$tW;AO++){DS(nJ.Ry(qi.YF,AO,wr))}};sofaGetListenerPosition=JV;function mB(ld){var R=[];var mZ=0;var TI=0;$ArraySetLenC(R,ld.mg,function(){return[]});var $tX;for(mZ=0,$tX=ld.mg;mZ<$tX;mZ++){$ArraySetLenC(R[mZ],ld.Vq,function(){return null});var $tY;for(TI=0,$tY=ld.Vq;TI<$tY;TI++){R[mZ][TI]=fh.p2(ld,mZ,TI)}}
return R};sofaGetImpulseResponses=mB;function Tt(w9,Nq,yF,vk){var R=null;var ZK=0;ZK=fh.xS(w9,Nq,yF,vk);R={RightDelay:fh.r6(w9,1),LeftDelay:fh.r6(w9,0),Right:fh.p2(w9,ZK,1),Left:fh.p2(w9,ZK,0),SampleRate:fh.A6(w9,0)};return R};sofaGetFilterSpherical=Tt;function em(wC,lb,lw,Ov){var R=null;var M9=0;M9=fh.dG(wC,lb,lw,Ov);R={RightDelay:fh.r6(wC,1),LeftDelay:fh.r6(wC,0),Right:fh.p2(wC,M9,1),Left:fh.p2(wC,M9,0),SampleRate:fh.A6(wC,0)};return R};sofaGetFilterCartesian=em;function xt(yh,r2){var R=[];var NP=0;var $tZ;for(NP=0,$tZ=yh.EX;NP<$tZ;NP++){R.push(nJ.Ry(yh.Kj,NP,r2))}
return R};sofaGetEmitterPositionList=xt;function l9(wI,l7,On){var fr=0;var $ta;for(fr=0,$ta=wI.EX;fr<$ta;fr++){l7(nJ.Ry(wI.Kj,fr,On))}};sofaGetEmitterPosition=l9;function ek(ke,C5){var R="";R="";if(ke.kh.has(C5))return String(ke.kh.get(C5));return R};sofaGetAttribute=ek;var WJ={$ClassName:"EHdfInvalidFormat",$Parent:Exception,$Init:function($){Exception.$Init($)},Destroy:Exception.Destroy};function mC(lH){var R=[0,0,0];R[2]=Math.sqrt((Math.pow(lH[0],2))+(Math.pow(lH[1],2))+(Math.pow(lH[2],2)));R[1]=Math.asin(lH[2]/R[2]);R[0]=Math.atan2(lH[1],lH[0]);return R};CartesianToSpherical=mC;
